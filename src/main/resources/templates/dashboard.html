<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>CEW ëŒ€ì‹œë³´ë“œ</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/gh/joungkyun/font-d2coding/d2coding.css" rel="stylesheet" type="text/css" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js" defer></script>
  <style>
    body { margin:0; font-family:'D2Coding', monospace; background:#000; color:#ddd; overflow-y:scroll; }

    /* ğŸš€ ë¹¨ê°„ ë ˆì´ì € ëŠë‚Œ ìŠ¤í¬ë¡¤ë°” */
    ::-webkit-scrollbar { width: 10px; }
    ::-webkit-scrollbar-track { background: #111; }
    ::-webkit-scrollbar-thumb {
      background: linear-gradient(180deg, #ff0000, #990000);
      border-radius: 5px;
      box-shadow: 0 0 10px #ff0000, 0 0 20px #ff3333;
    }
    ::-webkit-scrollbar-thumb:hover {
      background: linear-gradient(180deg, #ff3333, #cc0000);
      box-shadow: 0 0 15px #ff0000, 0 0 30px #ff3333;
    }

    .sidebar { position:fixed; top:0; left:0; width:240px; height:100%; background:#000; color:#fff;
      padding:20px 10px; border-right:1px solid #333; overflow-y:auto; }
    .logo-wrapper { text-align:center; margin-bottom:30px; cursor:pointer; }
    .logo-wrapper img { width:140px; }
    .menu { list-style:none; padding:0; margin:0; }
    .menu > li { margin:8px 0; font-size:16px; color:#fff; cursor:pointer; transition:0.3s; }
    .menu > li:hover { color:#ff0000; }
    .toggle { float:right; display:inline-block; width:22px; height:22px; border-radius:50%;
      background:#111; color:#ff0000; font-weight:bold; font-size:14px; text-align:center; line-height:22px;
      margin-left:5px; box-shadow: 0 0 5px #ff0000, 0 0 10px #ff3333; }
    .submenu { list-style:none; padding-left:20px; margin:5px 0; display:none; }
    .submenu li { font-size:14px; margin:4px 0; cursor:pointer; color:#bbb; }
    .submenu li:hover { color:#ff0000; }
    .content { margin-left:260px; padding:80px 20px 20px 20px; }
    .header { background:#000; color:#fff; padding:10px 20px; display:flex;
      justify-content:flex-end; align-items:center; border-bottom:1px solid #333; gap:15px;
      position:fixed; top:0; left:240px; right:0; z-index:1000; }
    #timer, #loginUser { color:#ffff00; }
    #userRole { color:#ffff00; text-shadow:0 0 5px #ffff00, 0 0 10px #ffea00; }
    .btn-danger { background:#ff0000; border:none; }

    /* ê³µí†µ ë°•ìŠ¤ */
    .box { border:none; background:#111; padding:10px; color:#ddd; }
    table { width:100%; font-size:12px; border-collapse:collapse; color:#ddd; }
    th,td { border-bottom:1px solid #444; padding:3px; text-align:center; }

    /* ë¡¤ë§ */
    .rolling-box { border:1px solid #fff; height:30px; overflow:hidden;
      margin:5px 0; font-size:13px; padding:2px 5px; background:#111; }
    .rolling-text { display:flex; flex-direction:column; animation:rollUp 8s linear infinite; }
    @keyframes rollUp { 0%{transform:translateY(0);} 100%{transform:translateY(-100%);} }

    /* ë¶„ì„ í˜ì´ì§€ */
    .dashboard { display:grid; grid-template-rows:60px auto 1fr; grid-gap:8px; min-height:800px; padding:8px; }
    .top-filter { background:#111; border-radius:8px; padding:8px; }
    .charts { display:grid; grid-template-columns:1fr 1fr; grid-gap:8px; align-items:stretch; }
    .tables { display:grid; grid-template-columns:1fr 1fr; grid-gap:8px; }
    .card { background:#111; border:none; border-radius:8px; padding:8px; color:#ddd; }
    .card canvas { width:100% !important; height:auto !important; max-height:none !important; }
    .btn-dark-custom { background:#222; border:none; color:#fff; padding:4px 10px; border-radius:5px; font-size:13px; }
    .btn-dark-custom:hover { background:#444; }
    .table-dark { --bs-table-bg:#161b22; --bs-table-striped-bg:#1c2128; --bs-table-hover-bg:#21262d;
      color:#ddd; font-size:14px; }
    .table-wrapper { max-height:200px; overflow-y:auto; }
    h5 { font-size:14px; margin-bottom:6px; }
    .circle { width:15px; height:15px; border-radius:50%; display:inline-block; margin:0 3px; }
    .green { background:green; } .yellow{background:yellow;} .red{background:red;} .gray{background:gray;}
    .battery { width:100px; height:25px; border:2px solid #fff; position:relative; margin:auto; }
    .battery::after { content:""; position:absolute; right:-6px; top:5px; width:4px; height:15px; background:#fff; }
    .battery-level { height:100%; width:70%; background:limegreen; }
    
    .packet-box {
  		background:#111;
  		color:#0f0;
 		 padding:10px;
 		 font-size:13px;
 		 white-space:pre;
  		border-radius:5px;
  		display:none;
}
	.badge-lg {
  		font-size: 14px;     /* ê¸€ì í¬ê¸° */
  		padding: 6px 12px;   /* ìœ„ì•„ë˜, ì¢Œìš° ì—¬ë°± */
  		border-radius: 6px;  /* ë‘¥ê¸€ê²Œ */
}

/* ë¡œê·¸ì•„ì›ƒëœ í–‰ íšŒìƒ‰ ì²˜ë¦¬ */
	.logged-out {
  		background-color: #444 !important;
  		color: #aaa !important;
}
	.logged-out td, 
	.logged-out th {
  		color: #aaa !important;
}
.card h5 {
  font-size:14px;
  margin-bottom:6px;
}

#riskChart {
  max-height:300px;   /* ì›í˜• ì°¨íŠ¸ ë„ˆë¬´ í¬ì§€ ì•Šê²Œ */
}

#accountTokens .badge {
  font-size: 14px;
  background-color: #0dcaf0;
  color: #000;
  cursor: pointer;
}
#accountDetailBox {
  background:#111;
  border:1px solid #555;
  padding:10px;
  border-radius:8px;
  white-space:pre-line;
}

.password-setting-box {
  max-width: 400px;
  margin-left: 0;   /* ë³¸ë¬¸ ì˜ì—­ì˜ ì™¼ìª½ ì •ë ¬ */
  margin-top: 20px; /* ì•½ê°„ ì•„ë˜ë¡œ */
}

.menu li.active,
.submenu li.active {
  border: 1px solid #ff4d4d;       /* ì—°í•œ ë¹¨ê°„ìƒ‰ í…Œë‘ë¦¬ */
  border-radius: 6px;
  padding: 3px 6px;
  background: rgba(255, 0, 0, 0.15); /* ì˜…ì€ ë¹¨ê°„ ë°°ê²½ */
  color: #ff4d4d;                  /* ê¸€ììƒ‰ë„ ê°•ì¡° */
  font-weight: bold;               /* ê¸€ì ë‘ê»ê²Œ */
}

  </style>
</head>
<body>
  <!-- ì‚¬ì´ë“œë°” -->
  <div class="sidebar">
    <div class="logo-wrapper" onclick="loadContent('ë³´ì•ˆ ì´ë²¤íŠ¸ ìš”ì•½')">
      <img src="/images/logo.png" alt="ë³´ì•ˆ ë¡œê³ " class="logo" id="eagleLogo">
    </div>
    <ul class="menu">
      <li class="has-sub">
        <span class="menu-title">ëŒ€ì‹œë³´ë“œ</span><span class="toggle">+</span>
        <ul class="submenu">
          <li onclick="loadContent('ë³´ì•ˆ ì´ë²¤íŠ¸ ìš”ì•½')">ë³´ì•ˆ ì´ë²¤íŠ¸ ìš”ì•½</li>
          <li onclick="loadContent('ë³´ì•ˆ ì´ë²¤íŠ¸ ë¶„ì„')">ë³´ì•ˆ ì´ë²¤íŠ¸ ë¶„ì„</li>
          <li onclick="loadContent('ë¦¬ì†ŒìŠ¤ ì‚¬ìš©í˜„í™©')">ë¦¬ì†ŒìŠ¤ ì‚¬ìš©í˜„í™©</li>
        </ul>
      </li>
      <li class="has-sub"><span class="menu-title">ì •ì±…ê´€ë¦¬</span><span class="toggle">+</span>
        <ul class="submenu"><li onclick="loadContent('ì •ì±… ê´€ë¦¬ í˜ì´ì§€')">ì •ì±… ê´€ë¦¬ í˜ì´ì§€</li></ul>
      </li>
      <li class="has-sub"><span class="menu-title">ë¡œê·¸ì„¼í„°</span><span class="toggle">+</span>
        <ul class="submenu">
          <li onclick="loadContent('íƒì§€ ë¡œê·¸')">íƒì§€ ë¡œê·¸</li>
          <li onclick="loadContent('ì•Œë¦¼ ë¡œê·¸')">ì•Œë¦¼ ë¡œê·¸</li>
          <li onclick="loadContent('ì°¨ë‹¨ ì´ë ¥ ë¡œê·¸')">ì°¨ë‹¨ ì´ë ¥ ë¡œê·¸</li>
          <li onclick="loadContent('ê´€ë¦¬ì í™œë™ ë¡œê·¸')">ê´€ë¦¬ì í™œë™ ë¡œê·¸</li>
        </ul>
      </li>
      <li class="has-sub"><span class="menu-title">DB ê´€ë¦¬ì„œë²„</span><span class="toggle">+</span>
        <ul class="submenu">
          <li onclick="loadContent('ë°±ì—… & ë³µêµ¬')">ë°±ì—… & ë³µêµ¬</li>
          <li onclick="loadContent('ë³´í˜¸ëŒ€ìƒ DB ê´€ë¦¬')">ë³´í˜¸ëŒ€ìƒ DB ê´€ë¦¬</li>
        </ul>
      </li>
      <li class="has-sub"><span class="menu-title">ê´€ë¦¬ì í˜ì´ì§€</span><span class="toggle">+</span>
        <ul class="submenu">
          <li onclick="loadContent('ê´€ë¦¬ì ê³„ì • ê´€ë¦¬')">ê´€ë¦¬ì ê³„ì • ê´€ë¦¬</li>
          <li onclick="loadContent('ì‚¬ìš©ì ê¶Œí•œ ê´€ë¦¬')">ì‚¬ìš©ì ê¶Œí•œ ê´€ë¦¬</li>
          <li onclick="loadContent('ì‹œìŠ¤í…œ ì •ì±… ì„¤ì •')">ì‹œìŠ¤í…œ ì •ì±… ì„¤ì •</li>
          <li onclick="loadContent('ì •ì±… ì‚­ì œ ì•”í˜¸ ì„¤ì •')">ì •ì±… ì‚­ì œ ì•”í˜¸ ì„¤ì •</li>
        </ul>
      </li>
      <li onclick="loadContent('ì‹œìŠ¤í…œ í™˜ê²½ ì„¤ì •')">ì‹œìŠ¤í…œ í™˜ê²½ ì„¤ì •</li>
    </ul>
  </div>

<!-- í—¤ë” -->
<div class="header">
  <span>ë¡œê·¸ì¸ ê²½ê³¼ì‹œê°„: <strong id="timer">00:00</strong></span>
  <span>ë¡œê·¸ì¸ ì•„ì´ë””: <strong id="loginUser" th:text="${user.login_id}"></strong></span>
  <span>ê¶Œí•œ: <strong id="userRole" th:text="${user.position}"></strong></span>
  <button class="btn btn-danger btn-sm" onclick="logout()">ë¡œê·¸ì•„ì›ƒ</button>
</div>

  <!-- ë©”ì¸ -->
 <div class="content" id="mainContent"></div>


  <!-- ì •ì±… í¸ì§‘ ëª¨ë‹¬ -->
<div class="modal fade" id="policyModal" tabindex="-1">
  <div class="modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable">
    <div class="modal-content bg-dark text-white">
      <div class="modal-header">
        <h5 class="modal-title">ì •ì±… í¸ì§‘ (ì‹ ê·œ)</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        
        <!-- ê¸°ë³¸ -->
        <div class="card mb-3 bg-secondary bg-opacity-25 p-3">
          <h6>ê¸°ë³¸</h6>
          <div class="row g-2">
            <div class="col-md-4"><label class="form-label">rule_id</label><input type="text" class="form-control form-control-sm bg-dark text-white" value="CEW_BLOCK01"></div>
            <div class="col-md-4"><label class="form-label">rule_name</label><input type="text" class="form-control form-control-sm bg-dark text-white" value="ë„ë‘‘ì¡ê¸°"></div>
            <div class="col-md-2"><label class="form-label">priority</label><input type="number" class="form-control form-control-sm bg-dark text-white" value="1"></div>
            <div class="col-md-2"><label class="form-label">action</label>
              <select class="form-select form-select-sm bg-dark text-white"><option>block</option><option>pass</option></select>
            </div>
            <div class="col-md-3"><label class="form-label">level</label>
              <select class="form-select form-select-sm bg-dark text-white"><option>safe</option><option>danger</option></select>
            </div>
            <div class="col-md-3"><label class="form-label">rule_type</label>
              <select class="form-select form-select-sm bg-dark text-white"><option>pattern</option><option>behavior</option></select>
            </div>
          </div>
        </div>

        <!-- ëŒ€ìƒ / ì¡°ê±´ -->
        <div class="card mb-3 bg-secondary bg-opacity-25 p-3">
          <h6>ëŒ€ìƒ / ì¡°ê±´</h6>
          <div class="row g-2">
            <div class="col-md-3"><label class="form-label">ip_start</label><input type="text" class="form-control form-control-sm bg-dark text-white" value="192.168.1.10"></div>
            <div class="col-md-3"><label class="form-label">ip_end</label><input type="text" class="form-control form-control-sm bg-dark text-white" value="192.168.1.20"></div>
            <div class="col-md-3"><label class="form-label">port_start</label><input type="number" class="form-control form-control-sm bg-dark text-white" value="22"></div>
            <div class="col-md-3"><label class="form-label">port_end</label><input type="number" class="form-control form-control-sm bg-dark text-white" value="30"></div>
            <div class="col-md-4"><label class="form-label">block_duration (sec)</label><input type="number" class="form-control form-control-sm bg-dark text-white" value="0"></div>
            <div class="col-md-4"><label class="form-label">base_cnt</label><input type="number" class="form-control form-control-sm bg-dark text-white" value="0"></div>
          </div>
        </div>

        <!-- ìŠ¤ì¼€ì¤„ -->
        <div class="card mb-3 bg-secondary bg-opacity-25 p-3">
          <h6>ìŠ¤ì¼€ì¤„</h6>
          <div class="row g-2">
            <div class="col-md-4"><label class="form-label">effective_from</label><input type="time" class="form-control form-control-sm bg-dark text-white"></div>
            <div class="col-md-4"><label class="form-label">effective_to</label><input type="time" class="form-control form-control-sm bg-dark text-white"></div>
            <div class="col-md-4"><label class="form-label">expire_dt</label><input type="date" class="form-control form-control-sm bg-dark text-white"></div>
            <div class="col-md-4"><label class="form-label">created_by</label><input type="text" class="form-control form-control-sm bg-dark text-white" value="admin" readonly></div>
            <div class="col-md-4"><label class="form-label">updated_by</label><input type="text" class="form-control form-control-sm bg-dark text-white" value="admin" readonly></div>
          </div>
        </div>

      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary btn-sm" data-bs-dismiss="modal">ë‹«ê¸°</button>
        <button type="button" class="btn btn-primary btn-sm">ì €ì¥</button>
      </div>
    </div>
  </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" defer></script>
<!-- ì‚­ì œ í™•ì¸ ëª¨ë‹¬ -->
<div class="modal fade" id="deleteModal" tabindex="-1">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content bg-dark text-white">
      <div class="modal-header">
        <h5 class="modal-title">ì‚­ì œ í™•ì¸</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <p>ì •ì±…ì„ ì‚­ì œí•˜ë ¤ë©´ ì•”í˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”.</p>
        <input type="password" id="deletePassword" class="form-control form-control-sm bg-dark text-white" placeholder="ì‚­ì œ ì•”í˜¸ ì…ë ¥">
        <div id="deleteError" class="text-danger mt-2" style="display:none;">ì•”í˜¸ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.</div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary btn-sm" data-bs-dismiss="modal">ì·¨ì†Œ</button>
        <button class="btn btn-danger btn-sm" onclick="confirmDelete()">ì‚­ì œ</button>
      </div>
    </div>
  </div>
</div>
<!-- ì‚­ì œëœ í•­ëª© ë³´ê¸° ëª¨ë‹¬ -->
<div class="modal fade" id="deletedListModal" tabindex="-1">
  <div class="modal-dialog modal-lg modal-dialog-centered">
    <div class="modal-content bg-dark text-white">
      <div class="modal-header">
        <h5 class="modal-title">ì‚­ì œëœ ì •ì±… ëª©ë¡</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <table class="table table-dark table-striped text-center">
          <thead>
            <tr>
              <th>rule_id</th>
              <th>rule_name</th>
              <th>level</th>
              <th>rule_type</th>
              <th>action</th>
            </tr>
          </thead>
          <tbody id="deletedPolicyList">
            <tr><td colspan="5">ì‚­ì œëœ í•­ëª©ì´ ì—†ìŠµë‹ˆë‹¤.</td></tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>

<!-- íƒì§€ë¡œê·¸ ìƒì„¸ ëª¨ë‹¬ -->
<div class="modal fade" id="logDetailModal" tabindex="-1">
  <div class="modal-dialog modal-lg">
    <div class="modal-content bg-dark text-white">
      <div class="modal-header">
        <h5 class="modal-title">ìƒì„¸ ì •ë³´</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <h6>ìš”ì•½ ì •ë³´</h6>
        <ul>
          <li>ì‹œê°„: 2025-09-16 10:00</li>
          <li>ì •ì±…ëª…: SQL Injection</li>
          <li>ìœ„í—˜ë„: <span class="badge bg-danger">High</span></li>
          <li>íƒì§€ ìœ í˜•: Web Attack</li>
          <li>ì¶œë°œì§€ IP: 192.168.1.10</li>
          <li>ëª©ì ì§€ IP: 10.0.0.5</li>
        </ul>

        <h6 class="mt-3">íŒ¨í‚· í•´ì„ ë‚´ìš©</h6>
        <p><strong>HTTP ìš”ì²­:</strong> GET /login.php?id=1' OR '1'='1 HTTP/1.1</p>
        <p><strong>Host:</strong> victim.com</p>
        <p><strong>User-Agent:</strong> Mozilla/5.0 â€¦</p>

        <button class="btn btn-secondary btn-sm mt-2" onclick="togglePacket()">ì›ë³¸ íŒ¨í‚· ë³´ê¸°</button>
        <div id="packetBox" class="packet-box mt-2">
4500 003c 1c46 4000 4006 b1e6 c0a8 0001
c0a8 0067 0050 89ab 1190 0000 0000 0000
5018 ffff aaaa bbbb 4745 5420 2f6c 6f67
696e 2e70 6870 3f69 643d 3127 204f 5220
3127 3d31 2048 5454 502f 312e 31
        </div>
      </div>
    </div>
  </div>
</div>
<!-- ì•Œë¦¼ë¡œê·¸ ìƒì„¸ ëª¨ë‹¬ -->
<div class="modal fade" id="alertLogModal" tabindex="-1">
  <div class="modal-dialog modal-lg">
    <div class="modal-content bg-dark text-white">
      <div class="modal-header">
        <h5 class="modal-title">ì•Œë¦¼ ë¡œê·¸ ìƒì„¸</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <h6>ìš”ì•½ ì •ë³´</h6>
        <ul>
          <li>ì•Œë¦¼ ì‹œê°: 2025-09-16 09:50</li>
          <li>ì•Œë¦¼ ëŒ€ìƒì: admin01 (admin@test.com)</li>
          <li>ì•Œë¦¼ ë°©ì‹: Email</li>
          <li>ì•Œë¦¼ ë“±ê¸‰: ê¸´ê¸‰</li>
          <li>ê´€ë ¨ íƒì§€ ì´ë²¤íŠ¸ ID: DET-00123</li>
          <li>ì•Œë¦¼ ë‚´ìš©: ê³ ìœ„í—˜ SQL Injection íƒì§€ë¨</li>
          <li>ë°œì†¡ ìƒíƒœ: ì„±ê³µ</li>
        </ul>

        <button class="btn btn-secondary btn-sm mt-2" onclick="togglePacket()">ì›ë³¸ íŒ¨í‚· ë³´ê¸°</button>
        <div id="packetBox" class="packet-box mt-2">
ì•Œë¦¼ ë¡œê·¸ëŠ” íŒ¨í‚· ë°ì´í„°ê°€ ì—†ì„ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.
        </div>
      </div>
    </div>
  </div>
</div>
<!-- ì°¨ë‹¨ ì´ë ¥ ë¡œê·¸ ìƒì„¸ ëª¨ë‹¬ -->
<div class="modal fade" id="blockLogModal" tabindex="-1">
  <div class="modal-dialog modal-lg">
    <div class="modal-content bg-dark text-white">
      <div class="modal-header">
        <h5 class="modal-title">ì°¨ë‹¨ ì´ë ¥ ë¡œê·¸ ìƒì„¸</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <h6>ìš”ì•½ ì •ë³´</h6>
        <ul>
          <li>ì°¨ë‹¨ ì‹œê°: 2025-09-15 14:30</li>
          <li>ì •ì±…ëª…/ë£° ID: Port Scan Rule #12</li>
          <li>ì°¨ë‹¨ ëŒ€ìƒ: 203.0.113.77</li>
          <li>ì¶œë°œì§€: 203.0.113.77:55555</li>
          <li>ëª©ì ì§€: 10.0.0.7:22</li>
          <li>ì°¨ë‹¨ ì‚¬ìœ : ë¹„ì¸ê°€ í¬íŠ¸ ì ‘ê·¼</li>
          <li>ì°¨ë‹¨ ê²°ê³¼: <span class="badge bg-success badge-lg">ì„±ê³µ</span></li>
          <li>ì°¨ë‹¨ ì§€ì†ì‹œê°„: 10ë¶„</li>
        </ul>
      </div>
    </div>
  </div>
</div>
<!-- ê³µí†µ ì•Œë¦¼ ëª¨ë‹¬ -->
<div class="modal fade" id="alertModal" tabindex="-1">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content bg-dark text-white">
      <div class="modal-header">
        <h5 class="modal-title">ì•Œë¦¼</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body" id="alertMessage">ë©”ì‹œì§€ ë‚´ìš©</div>
      <div class="modal-footer">
        <button class="btn btn-primary btn-sm" data-bs-dismiss="modal">í™•ì¸</button>
      </div>
    </div>
  </div>
</div>
<!-- ê³µí†µ í™•ì¸ ëª¨ë‹¬ -->
<div class="modal fade" id="confirmModal" tabindex="-1">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content bg-dark text-white">
      <div class="modal-header">
        <h5 class="modal-title">í™•ì¸</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body" id="confirmMessage">ë©”ì‹œì§€ ë‚´ìš©</div>
      <div class="modal-footer">
        <button class="btn btn-secondary btn-sm" data-bs-dismiss="modal">ì·¨ì†Œ</button>
        <button id="confirmOkBtn" class="btn btn-primary btn-sm">í™•ì¸</button>
      </div>
    </div>
  </div>
</div>

<!-- ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ ëª¨ë‹¬ -->
<div class="modal fade" id="changePasswordModal" tabindex="-1">
  <div class="modal-dialog modal-sm modal-dialog-centered">
    <div class="modal-content bg-dark text-white">
      <div class="modal-header">
        <h5 class="modal-title">ë¹„ë°€ë²ˆí˜¸ ë³€ê²½</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <form id="changePwForm">
          <div class="mb-2">
            <label class="form-label">í˜„ì¬ ë¹„ë°€ë²ˆí˜¸</label>
            <input type="password" name="current_password" class="form-control form-control-sm bg-dark text-white">
          </div>
          <div class="mb-2">
            <label class="form-label">ìƒˆ ë¹„ë°€ë²ˆí˜¸</label>
            <input type="password" name="new_password" class="form-control form-control-sm bg-dark text-white">
          </div>
          <div class="mb-2">
            <label class="form-label">ìƒˆ ë¹„ë°€ë²ˆí˜¸ í™•ì¸</label>
            <input type="password" name="new_password_confirm" class="form-control form-control-sm bg-dark text-white">
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary btn-sm" data-bs-dismiss="modal">ì·¨ì†Œ</button>
        <button class="btn btn-success btn-sm" id="savePwChange">ì €ì¥</button>
      </div>
    </div>
  </div>
</div>



<script>
  // ë©”ë‰´ í† ê¸€
  document.querySelectorAll(".has-sub").forEach(menu=>{
    const toggle=menu.querySelector(".toggle");
    const title=menu.querySelector(".menu-title");
    const submenu=menu.querySelector(".submenu");
    function toggleMenu(e){ e.stopPropagation();
      submenu.style.display=(submenu.style.display==="block")?"none":"block";
      toggle.textContent=(submenu.style.display==="block")?"-":"+"; }
    toggle.addEventListener("click",toggleMenu);
    title.addEventListener("click",toggleMenu);
  });
  let rowToDelete = null;  // ì „ì—­ ë³€ìˆ˜
  let deletedPolicies = []; // ì‚­ì œëœ ì •ì±…ë“¤ì„ ë³´ê´€

  function openDeleteModal(btn) {
    rowToDelete = btn.closest("tr");
    const modal = new bootstrap.Modal(document.getElementById("deleteModal"));
    modal.show();
  }

  function loadContent(title) {
    const content = document.getElementById("mainContent");
    // âœ… ëª¨ë“  ë©”ë‰´ active í•´ì œ
    document.querySelectorAll(".menu li, .submenu li").forEach(li => {
      li.classList.remove("active");
    });

    // âœ… ë°©ê¸ˆ í´ë¦­í•œ ë©”ë‰´ì— active ë¶€ì—¬
    const menus = document.querySelectorAll(".menu li, .submenu li");
    menus.forEach(li => {
      if (li.innerText.trim() === title) {
        li.classList.add("active");
      }
    });
    // --- ë³´ì•ˆ ì´ë²¤íŠ¸ ìš”ì•½ ---
    if(title==="ë³´ì•ˆ ì´ë²¤íŠ¸ ìš”ì•½"){
      content.innerHTML=`
        <h2>ë³´ì•ˆ ì´ë²¤íŠ¸ ìš”ì•½</h2>
        <div>ì‹¤ì‹œê°„ íƒì§€ ë‚´ìš©:</div>
        <div class="rolling-box"><div class="rolling-text">
          <span>[íƒì§€] SQL Injection ì°¨ë‹¨ë¨</span>
          <span>[íƒì§€] XSS ê³µê²© íƒì§€ë¨</span>
          <span>[íƒì§€] Port Scan ë°œìƒ</span>
          <span>[íƒì§€] RDP Brute Force ì°¨ë‹¨</span>
        </div></div>
        <div style="display:grid; grid-template-columns:1fr 1fr; gap:10px; margin-top:15px;">
          <div class="box"><canvas id="chart1"></canvas></div>
          <div class="box"><canvas id="chart2"></canvas></div>
        </div>
        <div style="display:grid; grid-template-columns:repeat(3,1fr); gap:10px; margin-top:15px;">
          <div class="box">ì¼ì¼ íƒì§€ ìˆœìœ„ (ì •ì±…ê¸°ë°˜)</div>
          <div class="box"><canvas id="chart3"></canvas></div>
          <div class="box">ì¼ì¼ ëˆ„ì  íƒì§€ íŒ¨í‚·ìˆ˜</div>
        </div>
        <div style="display:grid; grid-template-columns:repeat(3,1fr); gap:10px; margin-top:15px;">
          <div class="box">ì„œë²„ìƒíƒœ<br>
            <span class="circle green"></span>
            <span class="circle yellow"></span>
            <span class="circle red"></span>
            <span class="circle gray"></span>
          </div>
          <div class="box">ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰<br>
            <div class="battery"><div class="battery-level"></div></div>
          </div>
          <div class="box">ë°©í™”ë²½ ìƒíƒœ<br><strong style="color:lime;">ON</strong></div>
          <div class="box">ì—´ë ¤ ìˆëŠ” í¬íŠ¸
            <table><tr><th>í¬íŠ¸</th><th>ìƒíƒœ</th></tr>
              <tr><td>22</td><td>Open</td></tr>
              <tr><td>80</td><td>Open</td></tr>
              <tr><td>443</td><td>Open</td></tr>
            </table>
          </div>
          <div class="box">ìµœê·¼ì ‘ì†ë¡œê·¸
            <table><tr><th>ì‹œê°„</th><th>IP</th></tr>
              <tr><td>12:00</td><td>192.168.0.10</td></tr>
              <tr><td>12:05</td><td>192.168.0.11</td></tr>
            </table>
          </div>
          <div class="box">ì¼ì¼ ì´ë©”ì¼ ì•Œë¦¼í˜„í™©
            <ul>
              <li>ê´€ë¦¬ì ì•Œë¦¼ ì „ì†¡ ì™„ë£Œ</li>
              <li>ì •ì±… ì•Œë¦¼ ëŒ€ê¸°</li>
              <li>ì„œë²„ìƒíƒœ ì•Œë¦¼ ì™„ë£Œ</li>
            </ul>
          </div>
        </div>`;
      new Chart(document.getElementById('chart1'),{type:'line',
        data:{labels:["0ì‹œ","4ì‹œ","8ì‹œ","12ì‹œ","16ì‹œ","20ì‹œ"],
          datasets:[{label:"í–‰ë™ê¸°ë°˜",data:[5,7,3,8,6,9],borderColor:"red",fill:false},
                    {label:"íŒ¨í„´ê¸°ë°˜",data:[3,4,6,2,7,5],borderColor:"blue",fill:false}]}}); 
      new Chart(document.getElementById('chart2'),{type:'bar',
        data:{labels:["ì •ì±…A","ì •ì±…B","ì •ì±…C"],
          datasets:[{label:"íƒì§€ ê±´ìˆ˜",data:[12,19,7],backgroundColor:["red","orange","green"]}]}}); 
      new Chart(document.getElementById('chart3'),{type:'pie',
        data:{labels:["Critical","High","Medium","Low"],
          datasets:[{data:[5,10,15,20],backgroundColor:["red","orange","yellow","green"]}]}}); 
    }

    // --- ë³´ì•ˆ ì´ë²¤íŠ¸ ë¶„ì„ ---
else if(title==="ë³´ì•ˆ ì´ë²¤íŠ¸ ë¶„ì„"){
  content.innerHTML=`
    <div class="dashboard">
      
      <!-- ìƒë‹¨ í•„í„° -->
      <div class="top-filter mb-2">
        <div class="row g-2">
          <div class="col-md-2">
            <select class="form-select bg-dark text-white form-select-sm">
              <option>í–‰ë™ê¸°ë°˜</option><option>íŒ¨í„´ê¸°ë°˜</option><option>ì •ì±…ê¸°ë°˜</option>
            </select>
          </div>
          <div class="col-md-3"><input type="date" class="form-control bg-dark text-white form-control-sm"></div>
          <div class="col-md-3"><input type="time" class="form-control bg-dark text-white form-control-sm"></div>
          <div class="col-md-2 ms-auto text-end">
            <button class="btn-dark-custom btn-sm me-2">ì ìš©</button>
            <button class="btn-dark-custom btn-sm">ì´ˆê¸°í™”</button>
          </div>
        </div>
      </div>

      <!-- ë©”ì¸ ë ˆì´ì•„ì›ƒ -->
      <div class="row">
        <!-- ì™¼ìª½ ì˜ì—­ (ì‹œê°„ëŒ€ë³„ íƒì§€ + TOP10 ì„¸ë¡œë°°ì¹˜) -->
        <div class="col-md-8 d-flex flex-column gap-2">
          <div class="card flex-fill"><h5>ì‹œê°„ëŒ€ë³„ íƒì§€</h5><canvas id="timeChart"></canvas></div>
          <div class="card flex-fill"><h5>íƒì§€ TOP 10</h5><canvas id="top10Chart"></canvas></div>
        </div>

        <!-- ì˜¤ë¥¸ìª½ ì˜ì—­ (ìœ„í—˜ë„ ë¶„í¬) -->
        <div class="col-md-4">
          <div class="card h-100"><h5>ìœ„í—˜ë„ ë¶„í¬</h5><canvas id="riskChart"></canvas></div>
        </div>
      </div>

      <!-- í•˜ë‹¨ ë‚ ì§œ/ì‹œê°„ ì„¤ì • -->
      <div class="row mt-3">
      <div class="col-md-12 box text-center">
        ë‚ ì§œ ì„¤ì • : 
        <input type="date" id="customDate" class="form-control d-inline-block bg-dark text-white form-control-sm" style="width:auto;">
        ã€€
        ì‹œê°„ ì„¤ì • : 
        <input type="time" id="customTime" class="form-control d-inline-block bg-dark text-white form-control-sm" style="width:auto;">
        
        <button class="btn-dark-custom btn-sm ms-2" onclick="applyDateTime()">ì ìš©</button>
      </div>
    </div>
          <div class="tables">
            <div class="card"><h5>ì‹œê°„ëŒ€ë³„ íƒì§€ ë¡œê·¸</h5>
              <div class="table-wrapper">
                <table class="table table-dark table-striped">
                  <thead><tr><th>ì‹œê°„</th><th>ì •ì±…</th><th>ìœ„í—˜ë„</th><th>ì¶œë°œì§€</th><th>ì¡°ì¹˜</th></tr></thead>
                  <tbody>
                    <tr><td>2025-09-13 11:50</td><td>SQL Injection</td><td>Critical</td><td>203.0.113.10</td><td>ì°¨ë‹¨</td></tr>
                    <tr><td>2025-09-13 11:45</td><td>Brute Force</td><td>High</td><td>198.51.100.5</td><td>ì°¨ë‹¨</td></tr>
                    <tr><td>2025-09-13 11:40</td><td>Port Scan</td><td>Medium</td><td>192.168.1.100</td><td>íƒì§€ë§Œ</td></tr>
                  </tbody>
                </table>
              </div>
            </div>
            <div class="card"><h5>ìœ„í—˜ë„ ë¶„í¬ (ëª©ë¡)</h5>
              <div class="table-wrapper">
                <table class="table table-dark">
                  <thead><tr><th>ìœ„í—˜ë„</th><th>ê±´ìˆ˜</th></tr></thead>
                  <tbody>
                    <tr><td>Critical</td><td>11</td></tr>
                    <tr><td>High</td><td>71</td></tr>
                    <tr><td>Medium</td><td>87</td></tr>
                    <tr><td>Low</td><td>101</td></tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>`;
  // ===== ì°¨íŠ¸ë“¤ =====
  new Chart(document.getElementById('timeChart'), {
    type:'line',
    data:{
      labels:['00ì‹œ','03ì‹œ','06ì‹œ','09ì‹œ','12ì‹œ'],
      datasets:[{label:'íƒì§€ ê±´ìˆ˜',data:[3,7,5,12,9],borderColor:'red',fill:false}]
    }
  });
  
  new Chart(document.getElementById('top10Chart'), {
    type:'bar',
    data:{
      labels:['SQL Injection','Brute Force','Critical','Port Scan'],
      datasets:[{label:'íƒì§€ ê±´ìˆ˜',data:[20,15,8,5],backgroundColor:['#ff4d4d','#ff9933','#3399ff','#ffcc00']}]
    }
  });

  new Chart(document.getElementById('riskChart'), {
    type:'doughnut',
    data:{
      labels:['Critical','High','Medium','Low'],
      datasets:[{data:[11,71,87,101],backgroundColor:['#ff4d4d','#ff9933','#ffcc00','#27ae60']}]
    }
  });
}

    // --- ë¦¬ì†ŒìŠ¤ ì‚¬ìš©í˜„í™© ---
    else if(title==="ë¦¬ì†ŒìŠ¤ ì‚¬ìš©í˜„í™©"){
      content.innerHTML=`
        <h2>ë¦¬ì†ŒìŠ¤ ì‚¬ìš©í˜„í™©</h2>
        <div style="display:grid; grid-template-columns:repeat(4,1fr); gap:10px; margin-bottom:15px;">
          <div class="box text-center"><h5>CPU</h5><div id="cpuUsage" style="font-size:20px;">0%</div></div>
          <div class="box text-center"><h5>ë©”ëª¨ë¦¬</h5><div id="memoryUsage" style="font-size:20px;">0%</div></div>
          <div class="box text-center"><h5>ìŠ¤í† ë¦¬ì§€</h5><div id="storageUsage" style="font-size:20px;">0%</div></div>
          <div class="box text-center"><h5>ë„¤íŠ¸ì›Œí¬</h5><div id="networkUsage" style="font-size:20px;">0 Mbps</div></div>
        </div>
        <div style="display:grid; grid-template-columns:2fr 1fr; gap:10px; margin-bottom:15px;">
          <div class="box"><h5>ë¦¬ì†ŒìŠ¤ íŠ¸ë Œë“œ</h5><canvas id="resourceTrend"></canvas></div>
          <div class="box"><h5>ì•Œë¦¼ & ìƒíƒœ</h5>
            <ul style="font-size:13px; list-style:none; padding-left:0;">
              <li>09:10 - ìŠ¤í† ë¦¬ì§€ ì‚¬ìš©ë¥  80% ê·¼ì ‘ (ê²½ê³ )</li>
              <li>04:25 - CPU ìŠ¤íŒŒì´í¬ ê°ì§€</li>
              <li>ì–´ì œ 22:11 - ë„¤íŠ¸ì›Œí¬ RX ë¹„ì •ìƒ</li>
            </ul>
            <button class="btn-dark-custom btn-sm mt-2">ì„ê³„ì¹˜ ì´ˆê³¼ì‹œ ì´ë©”ì¼ ì•Œë¦¼</button>
            <button class="btn-dark-custom btn-sm mt-2">ìë™ ì •ì±… Â· ìŠ¤ë¡œí‹€ë§</button>
          </div>
        </div>
        <div class="box"><h5>ìƒì„¸ì •ë³´</h5><p>ë©”ëª¨ë¦¬, ìŠ¤í† ë¦¬ì§€, ë„¤íŠ¸ì›Œí¬ (í–¥í›„ ê°œë°œ ì˜ˆì •)</p></div>`;
      new Chart(document.getElementById('resourceTrend'),{type:'line',
        data:{labels:Array.from({length:12},(_,i)=>(i*5)+":00"),
          datasets:[
            {label:"CPU(%)",data:[20,40,35,60,45,70,55,65,40,50,45,60],borderColor:"red",fill:false},
            {label:"ë©”ëª¨ë¦¬(%)",data:[30,35,40,45,50,55,60,62,58,57,59,60],borderColor:"orange",fill:false},
            {label:"ë„¤íŠ¸ì›Œí¬(Mbps)",data:[100,150,120,200,180,220,210,190,170,160,180,200],borderColor:"blue",fill:false},
            {label:"ìŠ¤í† ë¦¬ì§€(%)",data:[50,52,53,54,55,56,57,58,59,60,61,62],borderColor:"green",fill:false}
          ]}}); 
      setInterval(()=>{document.getElementById("cpuUsage").innerText=Math.floor(Math.random()*100)+"%";
        document.getElementById("memoryUsage").innerText=Math.floor(Math.random()*100)+"%";
        document.getElementById("storageUsage").innerText=(40+Math.floor(Math.random()*60))+"%";
        document.getElementById("networkUsage").innerText=(100+Math.floor(Math.random()*900))+" Mbps";},3000);
    }
    // --- ì •ì±… ê´€ë¦¬ í˜ì´ì§€ ---
    else if(title==="ì •ì±… ê´€ë¦¬ í˜ì´ì§€"){
      content.innerHTML = `
        <h2>ì •ì±… ê´€ë¦¬</h2>
        <div class="box mb-3">
          <div class="row g-2">
            <div class="col-md-2"><input type="text" class="form-control form-control-sm bg-dark text-white" placeholder="rule_id, rule_name"></div>
            <div class="col-md-1"><select class="form-select form-select-sm bg-dark text-white"><option>ì „ì²´</option><option>íŒ¨í„´ê¸°ë°˜</option></select></div>
            <div class="col-md-1"><select class="form-select form-select-sm bg-dark text-white"><option>ì „ì²´</option><option>pass</option><option>block</option></select></div>
            <div class="col-md-1"><select class="form-select form-select-sm bg-dark text-white"><option>ì „ì²´</option><option>safe</option><option>danger</option></select></div>
            <div class="col-md-1"><select class="form-select form-select-sm bg-dark text-white"><option>ì „ì²´</option><option>enable</option><option>disable</option></select></div>
            <div class="col-md-1"><input type="number" class="form-control form-control-sm bg-dark text-white" value="0"></div>
            <div class="col-md-2"><input type="date" class="form-control form-control-sm bg-dark text-white"></div>
            <div class="col-md-2"><input type="date" class="form-control form-control-sm bg-dark text-white"></div>
            <div class="col-md-2">
            <div class="text">
            <button class="btn btn-primary btn-sm">í•„í„° ì ìš©</button>
            <button class="btn btn-secondary btn-sm">ì´ˆê¸°í™”</button>
          </div>
          </div>
          </div>
        </div>

        <div class="d-flex justify-content-end mb-2 gap-2">
          <button class="btn btn-success btn-sm">CSV ë‚´ë³´ë‚´ê¸°</button>
          <button class="btn btn-secondary btn-sm" data-bs-toggle="modal" data-bs-target="#deletedListModal">ì‚­ì œëœ í•­ëª© ë³´ê¸°</button>
          <button class="btn btn-primary btn-sm" data-bs-toggle="modal" data-bs-target="#policyModal">ì‹ ê·œ ì •ì±…</button>
        </div>

        <div class="table-wrapper">
          <table class="table table-dark table-striped text-center">
            <thead>
              <tr>
                <th>rule_id</th>
                <th>rule_name</th>
                <th>level</th>
                <th>rule_type</th>
                <th>action</th>
                <th>IP Range</th>
                <th>Port Range</th>
                <th>enable</th>
                <th>priority</th>
                <th>effective</th>
                <th>expire_dt</th>
                <th>ì‘ì—…</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>CEW_PASS01</td>
                <td>ë‚´ë¶€í—ˆìš©</td>
                <td><span class="badge bg-success badge-lg">safe</span></td>
                <td>pattern</td>
                <td>pass</td>
                <td>10.0.0.1 ~ 10.0.0.255</td>
                <td>80 ~ 80</td>
                <td><input type="checkbox" checked></td>
                <td>5</td>
                <td>00:00 ~ 23:59</td>
                <td>9999-12-30 00:00</td>
                <td>
                  <button class="btn-dark-custom btn-sm">ìˆ˜ì •</button>
                  <button class="btn-dark-custom btn-sm" onclick="openDeleteModal(this)">ì‚­ì œ</button>
                </td>
              </tr>
              <tr>
                <td>CEW_BLOCK02</td>
                <td>SQL Injection ì°¨ë‹¨</td>
                <td><span class="badge bg-danger badge-lg">danger</span></td>
                <td>pattern</td>
                <td>block</td>
                <td>*</td>
                <td>*</td>
                <td><input type="checkbox"></td>
                <td>2</td>
                <td>00:00 ~ 23:59</td>
                <td>9999-12-30 00:00</td>
                <td>
                  <button class="btn-dark-custom btn-sm">ìˆ˜ì •</button>
                  <button class="btn-dark-custom btn-sm" onclick="openDeleteModal(this)">ì‚­ì œ</button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      `;
    }
    // ====== íƒì§€ë¡œê·¸ =======
    else if(title === "íƒì§€ ë¡œê·¸") {
    	  content.innerHTML = `
    	    <h2>íƒì§€ ë¡œê·¸</h2>
    	    <table class="table table-dark table-bordered text-center">
    	      <thead>
    	        <tr>
    	          <th>íƒì§€ ì‹œê°</th>
    	          <th>ì •ì±…ëª…/íƒì§€ê·œì¹™</th>
    	          <th>ìœ„í—˜ë„</th>
    	          <th>íƒì§€ ìœ í˜•</th>
    	          <th>ì¶œë°œì§€ IP</th>
    	          <th>ì¶œë°œì§€ Port</th>
    	          <th>ëª©ì ì§€ IP</th>
    	          <th>ëª©ì ì§€ Port</th>
    	          <th>ì‘ì—…</th>
    	        </tr>
    	      </thead>
    	      <tbody>
    	        <tr>
    	          <td>2025-09-16 10:00</td>
    	          <td>SQL Injection</td>
    	          <td><span class="badge bg-danger badge-lg">High</span></td>
    	          <td>Web Attack</td>
    	          <td>192.168.1.10</td>
    	          <td>12345</td>
    	          <td>10.0.0.5</td>
    	          <td>80</td>
    	          <td>
    	            <button class="btn btn-sm btn-primary" data-bs-toggle="modal" data-bs-target="#logDetailModal">
    	              ìƒì„¸
    	            </button>
    	          </td>
    	        </tr>
    	      </tbody>
    	    </table>
    	  `;
    	}
 // ====== ì•Œë¦¼ ë¡œê·¸ ======
    else if(title === "ì•Œë¦¼ ë¡œê·¸") {
      content.innerHTML = `
        <h2>ì•Œë¦¼ ë¡œê·¸</h2>
        <div class="table-wrapper">
          <table class="table table-dark table-bordered text-center">
            <thead>
              <tr>
                <th>ì•Œë¦¼ ì‹œê°</th>
                <th>ì•Œë¦¼ ëŒ€ìƒì</th>
                <th>ì•Œë¦¼ ë°©ì‹</th>
                <th>ì•Œë¦¼ ë“±ê¸‰</th>
                <th>ê´€ë ¨ íƒì§€ ì´ë²¤íŠ¸ ID</th>
                <th>ì•Œë¦¼ ë‚´ìš©</th>
                <th>ë°œì†¡ ìƒíƒœ</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>2025-09-16 09:50</td>
                <td>admin01<br>(admin@test.com)</td>
                <td>Email</td>
                <td><span class="badge bg-danger badge-lg">ê¸´ê¸‰</span></td>
                <td>DET-00123</td>
                <td>ê³ ìœ„í—˜ SQL Injection íƒì§€ë¨</td>
                <td><span class="badge bg-success badge-lg">ì„±ê³µ</span></td>
              </tr>
            </tbody>
          </table>
        </div>
      `;
    }
 // ====== ì°¨ë‹¨ ì´ë ¥ ë¡œê·¸ ======
    else if(title === "ì°¨ë‹¨ ì´ë ¥ ë¡œê·¸") {
      content.innerHTML = `
        <h2>ì°¨ë‹¨ ì´ë ¥ ë¡œê·¸</h2>
        <div class="table-wrapper">
          <table class="table table-dark table-bordered text-center">
            <thead>
              <tr>
                <th>ì°¨ë‹¨ ì‹œê°</th>
                <th>ì •ì±…ëª…/ë£° ID</th>
                <th>ì°¨ë‹¨ ëŒ€ìƒ</th>
                <th>ì¶œë°œì§€ IP</th>
                <th>ì¶œë°œì§€ Port</th>
                <th>ëª©ì ì§€ IP</th>
                <th>ëª©ì ì§€ Port</th>
                <th>ì°¨ë‹¨ ì‚¬ìœ </th>
                <th>ì°¨ë‹¨ ê²°ê³¼</th>
                <th>ì°¨ë‹¨ ì§€ì†ì‹œê°„</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>2025-09-15 14:30</td>
                <td>Port Scan Rule #12</td>
                <td>203.0.113.77</td>
                <td>203.0.113.77</td>
                <td>55555</td>
                <td>10.0.0.7</td>
                <td>22</td>
                <td>ë¹„ì¸ê°€ í¬íŠ¸ ì ‘ê·¼</td>
                <td><span class="badge bg-success badge-lg">ì„±ê³µ</span></td>
                <td>10ë¶„</td>
              </tr>
            </tbody>
          </table>
        </div>
      `;
    }
 // ====== ê´€ë¦¬ì í™œë™ ë¡œê·¸ ======
    else if(title === "ê´€ë¦¬ì í™œë™ ë¡œê·¸") {
      content.innerHTML = `
        <h2>ê´€ë¦¬ì í™œë™ ë¡œê·¸</h2>
        <div class="table-wrapper">
          <table class="table table-dark table-bordered text-center">
            <thead>
              <tr>
                <th>í™œë™ ì‹œê°</th>
                <th>ê´€ë¦¬ì ID</th>
                <th>ê´€ë¦¬ì ê³„ì •</th>
                <th>ì‚¬ìš©í˜ì´ì§€</th>
                <th>ì„¸ë¶€ í™œë™ ë‚´ìš©</th>
                <th>ì ‘ì† IP</th>
                <th>ê²°ê³¼ ìƒíƒœ</th>
                <th>ë¹„ê³ </th>
              </tr>
            </thead>
            <tbody>
            <!-- ì •ìƒ í™œë™ -->
            <tr>
              <td>2025-09-15 11:00</td>
              <td>admin01</td>
              <td>ê´€ë¦¬ì ê³„ì • A</td> <!-- ì¶”ê°€ -->
              <td>ì •ì±…ê´€ë¦¬</td>
              <td>SQL Injection ì°¨ë‹¨ ì •ì±… ìˆ˜ì •</td>
              <td>192.168.1.100</td>
              <td><span class="badge bg-success badge-lg">ë¡œê·¸ì¸</span></td>
              <td>-</td>
            </tr>

            <!-- ë¡œê·¸ì•„ì›ƒëœ ê³„ì • -->
            <tr class="logged-out">
              <td>2025-09-15 11:05</td>
              <td>admin02</td>
              <td>ê´€ë¦¬ì ê³„ì • B</td> <!-- ì¶”ê°€ -->
              <td>ì‹œìŠ¤í…œí™˜ê²½ì„¤ì •</td>
              <td>ë¡œê·¸ì•„ì›ƒ</td>
              <td>192.168.1.110</td>
              <td><span class="badge bg-secondary badge-lg">ë¡œê·¸ì˜¤í”„</span></td>
              <td>-</td>
            </tr>
          </tbody>
          </table>
        </div>
      `;
    }
 // --- ë°±ì—… & ë³µêµ¬ ---
    else if (title === "ë°±ì—… & ë³µêµ¬") {
      content.innerHTML = `
        <h2>DB ë°±ì—… & ë³µêµ¬</h2>

        <!-- ë°±ì—… ì„¤ì • -->
        <div class="box mb-3">
          <h5>ë°±ì—… ì„¤ì •</h5>
          <div class="mb-2">
            <label class="form-label">DB ì„ íƒ</label>
            <select class="form-select bg-dark text-white form-select-sm" id="dbSelect">
              <option>MySQL</option>
              <option>PostgreSQL</option>
              <option>MariaDB</option>
            </select>
          </div>
          <div class="mb-2">
            <label class="form-label">ë°±ì—… ê²½ë¡œ</label>
            <input type="text" id="backupPath" class="form-control bg-dark text-white" value="/backup/db/">
          </div>
          <button class="btn btn-primary btn-sm" onclick="runBackup()">ë°±ì—… ì‹¤í–‰</button>
          <div class="progress mt-2" style="height:20px;">
            <div id="backupProgress" class="progress-bar bg-success" role="progressbar" style="width:0%;">0%</div>
          </div>
        </div>

        <!-- ë°±ì—… ìŠ¤ì¼€ì¤„ ì„¤ì • -->
        <div class="box mb-3">
          <h5>ë°±ì—… ìŠ¤ì¼€ì¤„ ì„¤ì •</h5>
          <div class="mb-2">
            <input type="radio" name="backupSchedule" value="daily"> ë§¤ì¼
            <input type="radio" name="backupSchedule" value="weekly"> ë§¤ì£¼
            <input type="radio" name="backupSchedule" value="monthly"> ë§¤ì›”
          </div>
          <button class="btn btn-secondary btn-sm" onclick="saveSchedule()">ì €ì¥</button>
          <p id="scheduleStatus" class="mt-2 text-info">ë°±ì—… ìŠ¤ì¼€ì¤„: ë¯¸ì„¤ì •</p>
        </div>

        <!-- ë³µêµ¬ ì‹¤í–‰ -->
        <div class="box">
          <h5>ë³µêµ¬ ì‹¤í–‰</h5>
          <div class="mb-2">
            <label class="form-label">ë³µêµ¬ ë‚ ì§œ</label>
            <input type="date" id="restoreDate" class="form-control bg-dark text-white">
          </div>
          <button class="btn btn-info btn-sm" onclick="runRestore()">ë³µêµ¬</button>
          <div class="mt-2">
            <label class="form-label">DB ì„ íƒ</label>
            <select class="form-select bg-dark text-white form-select-sm" id="restoreDbSelect">
              <option>MySQL</option>
              <option>PostgreSQL</option>
              <option>MariaDB</option>
            </select>
          </div>
          <div class="mt-2">
            <label class="form-label">ë³µêµ¬ ê²½ë¡œ</label>
            <input type="text" id="restorePath" class="form-control bg-dark text-white" placeholder="/backup/db/yyyy-mm-dd/">
          </div>
        </div>
      `;
    }
 // --- ë³´í˜¸ëŒ€ìƒ DB ê´€ë¦¬ ---
    else if (title === "ë³´í˜¸ëŒ€ìƒ DB ê´€ë¦¬") {
      content.innerHTML = `
        <h2>ë³´í˜¸ëŒ€ìƒ DB ê´€ë¦¬</h2>
        <div class="d-flex justify-content-end mb-2">
          <button class="btn btn-primary btn-sm" onclick="addDb()">DB ì¶”ê°€</button>
        </div>
        <div class="table-wrapper">
          <table class="table table-dark table-bordered text-center align-middle">
            <thead>
              <tr>
                <th>DB ì´ë¦„</th>
                <th>IP</th>
                <th>Port</th>
                <th>ìœ„í—˜ë„</th>
                <th>ìµœê·¼ íƒì§€ ì´ë²¤íŠ¸</th>
                <th>ì•”í˜¸í™” ì ìš©</th>
                <th>ì ‘ì† ë¡œê·¸</th>
                <th>ê´€ë¦¬</th>
              </tr>
            </thead>
            <tbody id="dbTableBody">
              <tr>
                <td>CustomerDB</td>
                <td>192.168.0.10</td>
                <td>3306</td>
                <td><span class="badge bg-danger badge-lg">Critical</span></td>
                <td>12ê±´ (ê²½ê³  7 / ì°¨ë‹¨ 5)</td>
                <td>ì ìš©</td>
                <td>ìµœê·¼ 24h: 120íšŒ / ì°¨ë‹¨ 5íšŒ</td>
                <td>
                <button class="btn-dark-custom btn-sm">ìˆ˜ì •</button>
                <button class="btn-dark-custom btn-sm" onclick="openDeleteModal(this)">ì‚­ì œ</button>
                </td>
              </tr>
              <tr>
                <td>LogDB</td>
                <td>192.168.0.20</td>
                <td>5432</td>
                <td><span class="badge bg-warning text-dark badge-lg">High</span></td>
                <td>6ê±´ (ê²½ê³  6 / ì°¨ë‹¨ 0)</td>
                <td>ë¯¸ì ìš©</td>
                <td>ìµœê·¼ 24h: 80íšŒ / ì°¨ë‹¨ 0íšŒ</td>
                <td>
                <button class="btn-dark-custom btn-sm">ìˆ˜ì •</button>
                <button class="btn-dark-custom btn-sm" onclick="openDeleteModal(this)">ì‚­ì œ</button>
                </td>
              </tr>
              <tr>
                <td>PaymentDB</td>
                <td>192.168.0.30</td>
                <td>1521</td>
                <td><span class="badge bg-success badge-lg">Low</span></td>
                <td>0ê±´ (ê²½ê³  0 / ì°¨ë‹¨ 0)</td>
                <td>ì ìš©</td>
                <td>ìµœê·¼ 24h: 30íšŒ / ì°¨ë‹¨ 0íšŒ</td>
                <td>
                <button class="btn-dark-custom btn-sm">ìˆ˜ì •</button>
                <button class="btn-dark-custom btn-sm" onclick="openDeleteModal(this)">ì‚­ì œ</button>
              </td>
              </tr>
            </tbody>
          </table>
        </div>
      `;
    }
    else if (title === "ê´€ë¦¬ì ê³„ì • ê´€ë¦¬") {
    	  content.innerHTML = `
    	    <h2>ê´€ë¦¬ì ê³„ì • ê´€ë¦¬</h2>

    	    <!-- ìƒë‹¨ ë²„íŠ¼ -->
    	    <div class="mb-2">
    	      <button class="btn btn-primary btn-sm" data-bs-toggle="modal" data-bs-target="#addAccountModal">+ ê³„ì • ë“±ë¡</button>
    	      <button class="btn btn-secondary btn-sm" id="editBtn">ê³„ì • ìˆ˜ì •</button>
    	      <button class="btn btn-danger btn-sm" id="deleteBtn">ê³„ì • ì‚­ì œ</button>
    	      <button class="btn btn-dark btn-sm" id="toggleStatusCol">ìƒíƒœ ìˆ¨ê¸°ê¸°</button>
    	    </div>

    	    <!-- ê³„ì • ëª©ë¡ í…Œì´ë¸” -->
    	    <div class="table-wrapper">
    	      <table class="table table-dark table-bordered text-center align-middle" id="accountTable">
    	        <thead>
    	          <tr>
    	            <th>ì„ íƒ</th>
    	            <th>ì•„ì´ë””</th>
    	            <th>ì´ë¦„</th>
    	            <th>ì´ë©”ì¼</th>
    	            <th>ì „í™”ë²ˆí˜¸</th>
    	            <th>ê¶Œí•œ</th>
    	            <th>ë“±ë¡ì¼</th>
    	            <th>ìˆ˜ì •ì¼</th>
    	            <th>ë§Œë£Œì¼</th>
    	            <th>ìƒíƒœ</th>
    	          </tr>
    	        </thead>
    	        <tbody>
    	          <tr>
    	            <td><input type="checkbox"></td>
    	            <td>admin01</td>
    	            <td>ìµœê³ ê´€ë¦¬ì</td>
    	            <td>admin01@security.com</td>
    	            <td>010-1234-5678</td>
    	            <td>ìµœê³ ê´€ë¦¬ì</td>
    	            <td>2025-09-01</td>
    	            <td>2025-09-20</td>
    	            <td>2026-09-01</td>
    	            <td><span class="badge bg-success badge-lg status-toggle">í™œì„±</span></td>
    	          </tr>
    	          <tr>
    	            <td><input type="checkbox"></td>
    	            <td>admin02</td>
    	            <td>ë³´ì•ˆë‹´ë‹¹</td>
    	            <td>admin02@security.com</td>
    	            <td>010-9876-5432</td>
    	            <td>ê´€ë¦¬ì</td>
    	            <td>2025-08-01</td>
    	            <td>2025-08-20</td>
    	            <td>2026-08-01</td>
    	            <td><span class="badge bg-danger badge-lg status-toggle">ë¹„í™œì„±</span></td>
    	          </tr>
    	        </tbody>
    	      </table>
    	    </div>

    	    <!-- ê³„ì • ë“±ë¡ ëª¨ë‹¬ -->
    	    <div class="modal fade" id="addAccountModal" tabindex="-1">
    	      <div class="modal-dialog modal-lg modal-dialog-centered">
    	        <div class="modal-content bg-dark text-white">
    	          <div class="modal-header">
    	            <h5 class="modal-title">ê³„ì • ë“±ë¡</h5>
    	            <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
    	          </div>
    	          <div class="modal-body">
    	            <form id="addAccountForm">
    	              <div class="row g-2">
    	                <div class="col-md-4"><label class="form-label">ì•„ì´ë””</label><input type="text" name="id" class="form-control form-control-sm bg-dark text-white" required></div>
    	                <div class="col-md-4" id="passwordField">
    	                <label class="form-label">ë¹„ë°€ë²ˆí˜¸</label>
    	                <input type="password" name="password" class="form-control form-control-sm bg-dark text-white">
    	              </div>

    	              <!-- âœ… ë¹„ë°€ë²ˆí˜¸ í™•ì¸ì€ ìƒˆ ì¤„ë¡œ ë¶„ë¦¬ -->
    	              <div class="col-md-4" id="confirmPwField">
    	                <label class="form-label">ë¹„ë°€ë²ˆí˜¸ í™•ì¸</label>
    	                <input type="password" name="confirm_password" class="form-control form-control-sm bg-dark text-white">
    	              </div>

    	              <!-- ìˆ˜ì • ëª¨ë“œ ì „ìš© -->
    	              <div class="col-md-4" id="changePwBox" style="display:none;">
    	                <label class="form-label d-block">ë¹„ë°€ë²ˆí˜¸</label>
    	                <button type="button" class="btn btn-warning btn-sm" id="showPwChange">ë¹„ë°€ë²ˆí˜¸ ë³€ê²½</button>
    	              </div>
    	                <div class="col-md-4"><label class="form-label">ì´ë¦„</label><input type="text" name="name" class="form-control form-control-sm bg-dark text-white"></div>
    	                <div class="col-md-6"><label class="form-label">ì´ë©”ì¼</label><input type="email" name="email" class="form-control form-control-sm bg-dark text-white"></div>
    	                <div class="col-md-6"><label class="form-label">ì „í™”ë²ˆí˜¸</label><input type="text" name="phone" class="form-control form-control-sm bg-dark text-white"></div>
    	                <div class="col-md-6"><label class="form-label">ê¶Œí•œ</label>
    	                  <select name="role" class="form-select form-select-sm bg-dark text-white">
    	                    <option>ìµœê³ ê´€ë¦¬ì</option>
    	                    <option>ê´€ë¦¬ì</option>
    	                    <option>ì‚¬ìš©ì</option>
    	                  </select>
    	                </div>
    	                <div class="col-md-6"><label class="form-label">ìƒíƒœ</label>
    	                  <select name="status" class="form-select form-select-sm bg-dark text-white">
    	                    <option value="í™œì„±">í™œì„±</option>
    	                    <option value="ë¹„í™œì„±">ë¹„í™œì„±</option>
    	                  </select>
    	                </div>
    	                <div class="col-md-6"><label class="form-label">ë§Œë£Œì¼</label><input type="date" name="expire" class="form-control form-control-sm bg-dark text-white"></div>
    	              </div>
    	            </form>
    	          </div>
    	          <div class="modal-footer">
    	            <button class="btn btn-secondary btn-sm" data-bs-dismiss="modal">ì·¨ì†Œ</button>
    	            <button class="btn btn-success btn-sm" onclick="saveAccount()">ì €ì¥</button>
    	          </div>
    	        </div>
    	      </div>
    	    </div>
    	  `;

    	// ìƒˆ ê³„ì • ì €ì¥ ê¸°ëŠ¥
    	  window.saveAccount = function() {
    	    const form = document.getElementById("addAccountForm");
    	    const data = Object.fromEntries(new FormData(form).entries());

    	    // í•„ìˆ˜ê°’ ì²´í¬
    	    if (!data.id || !data.password) {
    	      alert("ì•„ì´ë””ì™€ ë¹„ë°€ë²ˆí˜¸ëŠ” í•„ìˆ˜ì…ë‹ˆë‹¤!");
    	      return;
    	    }

    	    // âœ… ë¹„ë°€ë²ˆí˜¸ í™•ì¸ ì²´í¬
    	    if (data.password !== data.confirm_password) {
    	      alert("ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤!");
    	      return;
    	    }

    	    const today = new Date().toISOString().split("T")[0];

    	    // í…Œì´ë¸”ì— ìƒˆ í–‰ ì¶”ê°€
    	    const tbody = document.querySelector("#accountTable tbody");
    	    const row = document.createElement("tr");
    	    row.innerHTML = `
    	      <td><input type="checkbox"></td>
    	      <td>${data.id}</td>
    	      <td>${data.name || "-"}</td>
    	      <td>${data.email || "-"}</td>
    	      <td>${data.phone || "-"}</td>
    	      <td>${data.role}</td>
    	      <td>${today}</td>
    	      <td>${today}</td>
    	      <td>${data.expire || "-"}</td>
    	      <td><span class="badge ${data.status==="í™œì„±" ? "bg-success badge-lg" : "bg-danger badge-lg"}">${data.status}</span></td>
    	    `;
    	    tbody.appendChild(row);

    	    // ëª¨ë‹¬ ë‹«ê¸°
    	    const modal = bootstrap.Modal.getInstance(document.getElementById("addAccountModal"));
    	    modal.hide();

    	    // ì´ˆê¸°í™”
    	    form.reset(); 
    	    document.getElementById("confirmPwField").style.display = "block"; // âœ… í•­ìƒ ë³´ì´ë„ë¡ ì´ˆê¸°í™”
    	  };
    	}
    else if (title === "ì‚¬ìš©ì ê¶Œí•œ ê´€ë¦¬") {
    	  content.innerHTML = `
    	    <h2>ì‚¬ìš©ì ê¶Œí•œ ê´€ë¦¬</h2>

    	    <!-- ìƒë‹¨ ë²„íŠ¼ -->
    	    <div class="mb-2">
    	      <button class="btn btn-primary btn-sm" id="addRoleBtn">+ ê¶Œí•œ ë“±ë¡</button>
    	      <button class="btn btn-secondary btn-sm" id="editRoleBtn">ê¶Œí•œ ìˆ˜ì •</button>
    	      <button class="btn btn-danger btn-sm" id="deleteRoleBtn">ê¶Œí•œ ì‚­ì œ</button>
    	    </div>

    	    <!-- ê¶Œí•œ ëª©ë¡ í…Œì´ë¸” -->
    	    <div class="table-wrapper">
    	      <table class="table table-dark table-bordered text-center align-middle" id="roleTable">
    	        <thead>
    	          <tr>
    	            <th>ì„ íƒ</th>
    	            <th>ê¶Œí•œëª…</th>
    	            <th>ë ˆë²¨</th>
    	            <th>ì„¤ëª…</th>
    	          </tr>
    	        </thead>
    	        <tbody>
    	          <tr>
    	            <td><input type="checkbox"></td>
    	            <td>ìµœê³ ê´€ë¦¬ì</td>
    	            <td>1</td>
    	            <td>ëª¨ë“  ê¸°ëŠ¥ ì ‘ê·¼ ê°€ëŠ¥</td>
    	          </tr>
    	          <tr>
    	            <td><input type="checkbox"></td>
    	            <td>ì¤‘ê°„ê´€ë¦¬ì</td>
    	            <td>2</td>
    	            <td>ì¼ë¶€ ì‹œìŠ¤í…œ ì„¤ì • ë¶ˆê°€</td>
    	          </tr>
    	          <tr>
    	            <td><input type="checkbox"></td>
    	            <td>ì¼ë°˜ê´€ë¦¬ì</td>
    	            <td>3</td>
    	            <td>ë¡œê·¸ ì¡°íšŒ ë° ê¸°ë³¸ ì‘ì—… ê°€ëŠ¥</td>
    	          </tr>
    	        </tbody>
    	      </table>
    	    </div>

    	    <!-- ê¶Œí•œ ë“±ë¡/ìˆ˜ì • í¼ -->
    	    <div id="roleFormBox" class="box mt-3" style="display:none;">
    	      <h5 id="roleFormTitle">ê¶Œí•œ ë“±ë¡</h5>
    	      <form id="roleForm">
    	        <div class="row g-2">
    	          <div class="col-md-4">
    	            <label class="form-label">ê¶Œí•œëª…</label>
    	            <input type="text" name="name" class="form-control form-control-sm bg-dark text-white" required>
    	          </div>
    	          <div class="col-md-2">
    	            <label class="form-label">ë ˆë²¨</label>
    	            <input type="number" name="level" class="form-control form-control-sm bg-dark text-white" required>
    	          </div>
    	          <div class="col-md-6">
    	            <label class="form-label">ì„¤ëª…</label>
    	            <input type="text" name="desc" class="form-control form-control-sm bg-dark text-white">
    	          </div>
    	        </div>
    	        <div class="mt-2 text-end">
    	          <button type="button" class="btn btn-secondary btn-sm" onclick="hideRoleForm()">ì·¨ì†Œ</button>
    	          <button type="button" class="btn btn-success btn-sm" onclick="saveRole()">ì €ì¥</button>
    	        </div>
    	      </form>
    	    </div>
    	  `;
    	}
    
    else if (title === "ì‹œìŠ¤í…œ ì •ì±… ì„¤ì •") {
    	  content.innerHTML = `
    	    <h2>ì‹œìŠ¤í…œ ì •ì±… ì„¤ì •</h2>

    	    <!-- ì•Œë¦¼ ì„¹ì…˜ -->
    	    <div class="box mb-3">
    	      <h5>ì•Œë¦¼</h5>
    	      <div class="mb-2">
    	        <label class="form-label">ì•Œë¦¼ ì±„ë„</label>
    	        <div>
    	          <label><input type="checkbox" checked> ì´ë©”ì¼</label>
    	          <label class="ms-3"><input type="checkbox"> SMS</label>
    	        </div>
    	      </div>

    	      <!-- ê³„ì • ì„ íƒ -->
    	      <div class="mb-2">
    	        <div id="accountTokens" class="d-flex flex-wrap gap-2 mb-2"></div>
    	        <div class="input-group">
    	          <select id="accountSelect" class="form-select bg-dark text-white form-select-sm">
    	            <option value="">-- ê³„ì • ì„ íƒ --</option>
    	            <option value="admin01" data-name="í™ê¸¸ë™" data-phone="010-0000-0000" data-email="ghdrlfehd@naver.com">admin01</option>
    	            <option value="manager01" data-name="ê¹€ì² ìˆ˜" data-phone="010-1111-2222" data-email="manager@test.com">manager01</option>
    	            <option value="user01" data-name="ì´ì˜í¬" data-phone="010-3333-4444" data-email="user@test.com">user01</option>
    	          </select>
    	          <button class="btn btn-primary btn-sm" id="addAccountBtn">ì¶”ê°€</button>
    	        </div>
    	      </div>

    	      <!-- ìƒì„¸ ì •ë³´ -->
    	      <div id="accountDetailBox" class="box mt-2" style="display:none;">
    	        <p id="detailInfo"></p>
    	        <button class="btn btn-secondary btn-sm" id="closeDetailBtn">ì·¨ì†Œ</button>
    	      </div>

    	      <div class="mt-3">
    	        <label class="form-label">ì•Œë¦¼ ë ˆë²¨</label>
    	        <select class="form-select bg-dark text-white form-select-sm">
    	          <option>ì‚¬ìš©ì ì§€ì •</option>
    	          <option>ê¸´ê¸‰</option>
    	          <option>ì¤‘ê°„</option>
    	          <option>ë‚®ìŒ</option>
    	        </select>
    	      </div>

    	      <div class="mt-3">
    	        <label class="form-label">ì„ê³„ì¹˜ (ì˜ˆ: CPU %)</label>
    	        <input type="number" class="form-control form-control-sm bg-dark text-white" value="85">
    	      </div>

    	      <div class="mt-3">
    	        <button class="btn btn-info btn-sm">í…ŒìŠ¤íŠ¸ ì´ë©”ì¼</button>
    	        <button class="btn btn-info btn-sm">í…ŒìŠ¤íŠ¸ SMS</button>
    	      </div>
    	    </div>

    	    <!-- ë³´ì•ˆ ì„¹ì…˜ -->
    	    <div class="box">
    	      <h5>ë³´ì•ˆ</h5>
    	      <div class="mb-2">
    	        <label><input type="checkbox" checked> ì´ë©”ì¼</label>
    	        <label class="ms-3"><input type="checkbox"> SMS</label>
    	      </div>

    	      <div class="mb-2">
    	        <label class="form-label">ë¹„ë°€ë²ˆí˜¸ ìµœì†Œ ê¸¸ì´</label>
    	        <input type="number" class="form-control form-control-sm bg-dark text-white" value="8">
    	      </div>
    	      <div class="mb-2">
    	        <label class="form-label">ë¹„ë°€ë²ˆí˜¸ ë§Œë£Œì¼</label>
    	        <input type="number" class="form-control form-control-sm bg-dark text-white" value="90">
    	      </div>
    	      <div class="mb-2">
    	        <label class="form-label">ì„¸ì…˜ íƒ€ì„ì•„ì›ƒ (ë¶„)</label>
    	        <input type="number" class="form-control form-control-sm bg-dark text-white" value="30">
    	      </div>

    	      <button class="btn btn-success btn-sm">ì €ì¥</button>
    	    </div>
    	  `;
    	}
    else if (title === "ì •ì±… ì‚­ì œ ì•”í˜¸ ì„¤ì •") {
    	  content.innerHTML = `
    	    <h2>ì •ì±… ì‚­ì œ ì•”í˜¸ ì„¤ì •</h2>
    	    <div class="box" style="max-width:400px; margin:auto;">
    	      <form id="deletePwForm">
    	        <div class="mb-3">
    	          <label class="form-label">í˜„ì¬ ì•”í˜¸</label>
    	          <input type="password" name="current" class="form-control form-control-sm bg-dark text-white">
    	          <div class="form-text text-muted">í˜„ì¬ ì„¤ì •ëœ ì•”í˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”.</div>
    	        </div>
    	        <div class="mb-3">
    	          <label class="form-label">ìƒˆ ì•”í˜¸</label>
    	          <input type="password" name="new" class="form-control form-control-sm bg-dark text-white" required>
    	        </div>
    	        <div class="mb-3">
    	          <label class="form-label">ìƒˆ ì•”í˜¸ í™•ì¸</label>
    	          <input type="password" name="confirm" class="form-control form-control-sm bg-dark text-white" required>
    	        </div>
    	        <button type="button" class="btn btn-success btn-sm w-100" onclick="saveDeletePassword()">ì €ì¥</button>
    	      </form>
    	    </div>
    	  `;

    	  // ì €ì¥ëœ ì•”í˜¸ ì—¬ë¶€ í‘œì‹œ
    	  const stored = localStorage.getItem("deletePassword");
    	  if (stored) {
    	    document.querySelector("#deletePwForm").insertAdjacentHTML("afterbegin",
    	      `<div class="alert alert-info p-2">í˜„ì¬ ì„¤ì •ëœ ì•”í˜¸: â—â—â—â—â—â—</div>`);
    	  }
    	}
    else if (title === "ì‹œìŠ¤í…œ í™˜ê²½ ì„¤ì •") {
    	  content.innerHTML = `
    	    <h2>ì‹œìŠ¤í…œ í™˜ê²½ ì„¤ì •</h2>
    	    <div class="box mb-3">
    	      <small class="text-muted">Slack ì—°ë™, ì•Œë¦¼í™˜ê²½ ë“±ì„ í¬í•¨í•œ ì–´í”Œë¦¬ì¼€ì´ì…˜ì˜ ì „ì²´ ì„¤ì •ì…ë‹ˆë‹¤.</small>
    	    </div>

    	    <div class="box mb-3" style="max-width:800px;">
    	      <h5>ì¼ë°˜</h5>

    	      <div class="mb-2">
    	        <label class="form-label">ì–¸ì–´</label>
    	        <select class="form-select bg-dark text-white form-select-sm">
    	          <option>í•œêµ­ì–´</option>
    	          <option selected>æ—¥æœ¬èª</option>
    	          <option>English</option>
    	        </select>
    	      </div>

    	      <div class="mb-2">
    	        <label class="form-label">í…Œë§ˆ</label>
    	        <select class="form-select bg-dark text-white form-select-sm">
    	          <option>ë¼ì´íŠ¸</option>
    	          <option selected>ë‹¤í¬</option>
    	        </select>
    	      </div>

    	      <div class="mb-2">
    	        <label class="form-label">íƒ€ì„ì¡´</label>
    	        <select class="form-select bg-dark text-white form-select-sm">
    	          <option>Asia/Seoul</option>
    	          <option selected>America/Los_Angeles</option>
    	          <option>Europe/London</option>
    	        </select>
    	      </div>

    	      <div class="mb-2">
    	        <label class="form-label">ë‚ ì§œ í˜•ì‹</label>
    	        <select class="form-select bg-dark text-white form-select-sm">
    	          <option>DD/MM/YYYY</option>
    	          <option selected>YYYY-MM-DD</option>
    	        </select>
    	      </div>

    	      <div class="mb-2">
    	        <label class="form-label">ì‹œê°„ í˜•ì‹</label>
    	        <select class="form-select bg-dark text-white form-select-sm">
    	          <option>12ì‹œê°„</option>
    	          <option selected>24ì‹œê°„</option>
    	        </select>
    	      </div>

    	      <div class="mb-3">
    	        <label class="form-label">í…Œì´ë¸” í•„ë“œ</label>
    	        <select class="form-select bg-dark text-white form-select-sm">
    	          <option selected>ì»´íŒ©íŠ¸</option>
    	          <option>ë„“ê²Œ</option>
    	        </select>
    	      </div>
    	    </div>
    	    
    	    <div class="text-start" style="max-width:600px;">
    	    <button class="btn btn-success">ì €ì¥</button>
    	  </div>	 
    	  `;
    	}
    
    // --- ì¤€ë¹„ì¤‘ ---
    else{
      content.innerHTML=`<h2>${title}</h2><p>ì¤€ë¹„ì¤‘ì¸ í˜ì´ì§€ì…ë‹ˆë‹¤.</p>`;
    }
  } 
  const deletedListModal = document.getElementById("deletedListModal");
  deletedListModal.addEventListener("show.bs.modal", () => {
    const tbody = document.getElementById("deletedPolicyList");
    tbody.innerHTML = "";

    if (deletedPolicies.length === 0) {
      tbody.innerHTML = `<tr><td colspan="5">ì‚­ì œëœ í•­ëª©ì´ ì—†ìŠµë‹ˆë‹¤.</td></tr>`;
      return;
    }

    deletedPolicies.forEach(p => {
      const row = document.createElement("tr");
      row.innerHTML = `
        <td>${p.rule_id}</td>
        <td>${p.rule_name}</td>
        <td>${p.level}</td>
        <td>${p.rule_type}</td>
        <td>${p.action}</td>
      `;
      tbody.appendChild(row);
    });
  });

  document.addEventListener("DOMContentLoaded", () => {
	  // ì²« í˜ì´ì§€ ë¡œë“œ ì‹œ 'ë³´ì•ˆ ì´ë²¤íŠ¸ ìš”ì•½' ë³´ì—¬ì£¼ê¸°
	  loadContent('ë³´ì•ˆ ì´ë²¤íŠ¸ ìš”ì•½');

	  // ë¡œê·¸ì¸ ê²½ê³¼ì‹œê°„ íƒ€ì´ë¨¸ ì‹œì‘
	  let seconds = 0;
	  setInterval(() => {
	    seconds++;
	    let m = String(Math.floor(seconds / 60)).padStart(2, '0');
	    let s = String(seconds % 60).padStart(2, '0');
	    const timerEl = document.getElementById("timer");
	    if (timerEl) {
	      timerEl.textContent = `${m}:${s}`;
	    }
	  }, 1000);
	});
  
  function confirmDelete() {
	  const input = document.getElementById("deletePassword").value;
	  const errorBox = document.getElementById("deleteError");
	  const savedPw = localStorage.getItem("deletePassword") || "admin123";
	  if (input === savedPw) {
	    errorBox.style.display = "none";

	    if (rowToDelete) {
	      // ì‚­ì œëœ ì •ì±… ë°ì´í„°ë¥¼ ì €ì¥
	      const cells = rowToDelete.querySelectorAll("td");
	      const deletedPolicy = {
	        rule_id: cells[0].innerText,
	        rule_name: cells[1].innerText,
	        level: cells[2].innerText,
	        rule_type: cells[3].innerText,
	        action: cells[4].innerText
	      };
	      deletedPolicies.push(deletedPolicy);

	      rowToDelete.remove(); // âœ… ì‹¤ì œ í…Œì´ë¸”ì—ì„œ ì‚­ì œ
	    }

	    const modal = bootstrap.Modal.getInstance(document.getElementById("deleteModal"));
	    modal.hide();
	  } else {
	    errorBox.style.display = "block";
	  }
	}
  
  function togglePacket() {
	  const box = document.getElementById("packetBox");
	  box.style.display = (box.style.display === "none" || box.style.display === "") ? "block" : "none";
	}
  
//ë°±ì—… ì‹¤í–‰ (í”„ë¡œê·¸ë ˆìŠ¤ ë°”)
  function runBackup() {
    let progress = 0;
    const bar = document.getElementById("backupProgress");
    const interval = setInterval(() => {
      if (progress >= 100) {
        clearInterval(interval);
        bar.innerText = "ì™„ë£Œ";
      } else {
        progress += 10;
        bar.style.width = progress + "%";
        bar.innerText = progress + "%";
      }
    }, 300);
  }

  // ë°±ì—… ìŠ¤ì¼€ì¤„ ì €ì¥
  function saveSchedule() {
    const selected = document.querySelector("input[name='backupSchedule']:checked");
    const status = document.getElementById("scheduleStatus");
    if (selected) {
      status.innerText = "ë°±ì—… ìŠ¤ì¼€ì¤„: " + selected.value + " ë¡œ ì €ì¥ë¨";
    } else {
      status.innerText = "ìŠ¤ì¼€ì¤„ì´ ì„ íƒë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.";
    }
  }

  // ë³µêµ¬ ì‹¤í–‰
  function runRestore() {
    const date = document.getElementById("restoreDate").value;
    const db = document.getElementById("restoreDbSelect").value;
    const path = document.getElementById("restorePath").value;

    if (!date || !path) {
      alert("ë³µêµ¬ ë‚ ì§œì™€ ê²½ë¡œë¥¼ ì…ë ¥í•˜ì„¸ìš”.");
      return;
    }

    alert(`ğŸ“‚ [${db}] ${date} ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ${path} ê²½ë¡œì—ì„œ ë³µêµ¬ ì‹¤í–‰!`);
  }
//ë³´í˜¸ëŒ€ìƒ DB ì¶”ê°€ (ì˜ˆì‹œ)
  function addDb() {
    alert("DB ì¶”ê°€ ê¸°ëŠ¥ì€ ì¶”í›„ êµ¬í˜„ ì˜ˆì •ì…ë‹ˆë‹¤.");
  }

  // ìˆ˜ì • ë²„íŠ¼
  function editDb(btn) {
    const row = btn.closest("tr");
    const dbName = row.cells[0].innerText;
    alert(dbName + " ìˆ˜ì • ê¸°ëŠ¥ ì‹¤í–‰");
  }

  // ì‚­ì œ ë²„íŠ¼
  function deleteDb(btn) {
    if (confirm("ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) {
      btn.closest("tr").remove();
    }
  }
  // ë‚ ì§œ ì‹œê°„ ìˆ˜ì • 
  function applyDateTime() {
	  const date = document.getElementById("customDate").value;
	  const time = document.getElementById("customTime").value;

	  if (!date || !time) {
	    alert("ë‚ ì§œì™€ ì‹œê°„ì„ ëª¨ë‘ ì„ íƒí•˜ì„¸ìš”!");
	    return;
	  }

	  alert(`ğŸ“… ì„ íƒëœ ë‚ ì§œ/ì‹œê°„: ${date} ${time}`);
	  // ì—¬ê¸°ì„œ ì°¨íŠ¸ ë°ì´í„° ë‹¤ì‹œ ë¶ˆëŸ¬ì˜¤ê¸° ê°™ì€ ë™ì‘ ë„£ì„ ìˆ˜ ìˆìŒ
	}
  function logout() {
	  fetch("/logout", { method: "POST" })
	    .then(() => {
	      window.location.href = "/login";  // ë¡œê·¸ì•„ì›ƒ í›„ ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™
	    })
	    .catch(err => console.error("ë¡œê·¸ì•„ì›ƒ ì‹¤íŒ¨:", err));
	}
  
//ê´€ë¦¬ì ê³„ì • ê´€ë¦¬ - ìˆ˜ì •/ì‚­ì œ ë²„íŠ¼ ì´ë²¤íŠ¸ ìœ„ì„
document.getElementById("mainContent").addEventListener("click", (e) => {
  // ê³„ì • ìˆ˜ì •
  if (e.target && e.target.id === "editBtn") {
    const checked = document.querySelectorAll("#accountTable tbody input[type='checkbox']:checked");

    if (checked.length === 0) {
      showAlert("ìˆ˜ì •í•  ê³„ì •ì„ ì„ íƒí•˜ì„¸ìš”.");
      return;
    }
    if (checked.length > 1) {
      showAlert("âš ï¸ ê³„ì • ìˆ˜ì •ì€ í•œ ë²ˆì— í•˜ë‚˜ë§Œ ê°€ëŠ¥í•©ë‹ˆë‹¤.");
      return;
    }

    const row = checked[0].closest("tr");
    const cells = row.querySelectorAll("td");

    const form = document.getElementById("addAccountForm");
    form.elements["id"].value = cells[1].innerText;
    form.elements["name"].value = cells[2].innerText;
    form.elements["email"].value = cells[3].innerText;
    form.elements["phone"].value = cells[4].innerText;
    form.elements["role"].value = cells[5].innerText;
    form.elements["expire"].value = cells[8].innerText !== "-" ? cells[8].innerText : "";
    form.elements["status"].value = cells[9].innerText.trim();

    form.dataset.editingRow = row.rowIndex;

    const modal = new bootstrap.Modal(document.getElementById("addAccountModal"));
    modal.show();
    
 // ê³„ì • ìˆ˜ì • ëª¨ë“œì¼ ë•Œ
    form.elements["id"].readOnly = true;   // ì•„ì´ë”” ê³ ì •
    document.getElementById("confirmPwField").style.display = "none"; // ë¹„ë²ˆ í™•ì¸ë²„íŠ¼ì¶”ê°€
    document.getElementById("changePwBox").style.display = "block";
  }
  

  // ê³„ì • ì‚­ì œ
  if (e.target && e.target.id === "deleteBtn") {
    const checked = document.querySelectorAll("#accountTable tbody input[type='checkbox']:checked");

    if (checked.length === 0) {
      showAlert("ì‚­ì œí•  ê³„ì •ì„ ì„ íƒí•˜ì„¸ìš”.");
      return;
    }

    showConfirm("ì„ íƒí•œ ê³„ì •ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?", () => {
      checked.forEach(cb => cb.closest("tr").remove());
    });
  }

  // ìƒíƒœ ë±ƒì§€ í´ë¦­ ì‹œ
  if (e.target.classList.contains("status-toggle")) {
    const badge = e.target;
    const current = badge.innerText.trim();
    const next = current === "í™œì„±" ? "ë¹„í™œì„±" : "í™œì„±";

    showConfirm(`ì •ë§ "${next}" ìƒíƒœë¡œ ë³€ê²½í•˜ì‹œê² ìŠµë‹ˆê¹Œ?`, () => {
      badge.innerText = next;
      badge.className = `badge badge-lg ${next === "í™œì„±" ? "bg-success" : "bg-danger"} status-toggle`;
    });
  }
});

//ê´€ë¦¬ì ê³„ì • ê´€ë¦¬ - ìƒíƒœ ì»¬ëŸ¼ ìˆ¨ê¸°ê¸°/ë³´ì´ê¸°
document.getElementById("mainContent").addEventListener("click", (e) => {
  if (e.target && e.target.id === "toggleStatusCol") {
    const table = document.getElementById("accountTable");
    if (!table) return;
    const colIndex = 9; // ìƒíƒœ ì»¬ëŸ¼ index (0ë¶€í„° ì‹œì‘í•´ì„œ 10ë²ˆì§¸ ì»¬ëŸ¼)

    const isHidden = table.querySelector("thead th:nth-child(10)").style.display === "none";

    // thead
    table.querySelector("thead th:nth-child(10)").style.display = isHidden ? "" : "none";
    // tbody
    table.querySelectorAll("tbody tr").forEach(tr => {
      tr.cells[colIndex].style.display = isHidden ? "" : "none";
    });

    // ë²„íŠ¼ í…ìŠ¤íŠ¸ í† ê¸€
    e.target.innerText = isHidden ? "ìƒíƒœ ìˆ¨ê¸°ê¸°" : "ìƒíƒœ ë³´ì´ê¸°";
  }
//"ë¹„ë°€ë²ˆí˜¸ ë³€ê²½" ë²„íŠ¼ í´ë¦­ ì‹œ â†’ ìƒˆ ëª¨ë‹¬ ì—´ê¸°
  document.addEventListener("click", (e) => {
    if (e.target && e.target.id === "showPwChange") {
      const modal = new bootstrap.Modal(document.getElementById("changePasswordModal"));
      modal.show();
    }
  });

  // ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ ì €ì¥ ì²˜ë¦¬
  document.getElementById("savePwChange").addEventListener("click", () => {
    const form = document.getElementById("changePwForm");
    const data = Object.fromEntries(new FormData(form).entries());

    if (!data.current_password || !data.new_password) {
      showAlert("âš ï¸ í˜„ì¬ ë¹„ë°€ë²ˆí˜¸ì™€ ìƒˆ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”.");
      return;
    }
    if (data.new_password !== data.new_password_confirm) {
      showAlert("âš ï¸ ìƒˆ ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.");
      return;
    }

    // ğŸ‘‰ ì‹¤ì œ ì„œë²„ ê²€ì¦/ì €ì¥ì€ ì—¬ê¸°ì„œ ì²˜ë¦¬
    console.log("ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ë¨:", data);

    // ëª¨ë‹¬ ë‹«ê¸° & ì´ˆê¸°í™”
    const modal = bootstrap.Modal.getInstance(document.getElementById("changePasswordModal"));
    modal.hide();
    form.reset();
    showAlert("âœ… ë¹„ë°€ë²ˆí˜¸ê°€ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤.");
  });

  function showAlert(msg) {
	  document.getElementById("alertMessage").innerText = msg;
	  new bootstrap.Modal(document.getElementById("alertModal")).show();
	}
//confirm ëŒ€ì²´ í•¨ìˆ˜
  function showConfirm(msg, onOk) {
    document.getElementById("confirmMessage").innerText = msg;
    const modalEl = document.getElementById("confirmModal");
    const modal = new bootstrap.Modal(modalEl);
    modal.show();

    // í™•ì¸ ë²„íŠ¼ í´ë¦­ ì‹œ ì½œë°± ì‹¤í–‰
    document.getElementById("confirmOkBtn").onclick = () => {
      modal.hide();
      if (typeof onOk === "function") onOk();
    };
  }
  
  function hideRoleForm() {
	  document.getElementById("roleFormBox").style.display = "none";
	  document.getElementById("roleForm").reset();
	  delete document.getElementById("roleForm").dataset.editingRow;
	}

	function saveRole() {
	  const form = document.getElementById("roleForm");
	  const data = Object.fromEntries(new FormData(form).entries());
	  const tbody = document.querySelector("#roleTable tbody");

	  if (form.dataset.editingRow) {
	    // ìˆ˜ì •
	    const row = tbody.rows[form.dataset.editingRow];
	    row.cells[1].innerText = data.name;
	    row.cells[2].innerText = data.level;
	    row.cells[3].innerText = data.desc;
	    delete form.dataset.editingRow;
	  } else {
	    // ì‹ ê·œ ë“±ë¡
	    const row = document.createElement("tr");
	    row.innerHTML = `
	      <td><input type="checkbox"></td>
	      <td>${data.name}</td>
	      <td>${data.level}</td>
	      <td>${data.desc}</td>
	    `;
	    tbody.appendChild(row);
	  }

	  hideRoleForm();
	}
	
	function saveDeletePassword() {
		  const form = document.getElementById("deletePwForm");
		  const currentPw = form.current.value;
		  const newPw = form.new.value;
		  const confirmPw = form.confirm.value;

		  const savedPw = localStorage.getItem("deletePassword") || "admin123";

		  if (currentPw !== savedPw) {
		    alert("âš ï¸ í˜„ì¬ ì•”í˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.");
		    return;
		  }
		  if (newPw.length < 8) {
		    alert("âš ï¸ ìƒˆ ì•”í˜¸ëŠ” 8ìë¦¬ ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤.");
		    return;
		  }
		  if (newPw !== confirmPw) {
		    alert("âš ï¸ ìƒˆ ì•”í˜¸ì™€ í™•ì¸ì´ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.");
		    return;
		  }

		  localStorage.setItem("deletePassword", newPw);
		  alert("âœ… ì •ì±… ì‚­ì œ ì•”í˜¸ê°€ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤.");
		  form.reset();
		}


	// ì‚¬ìš©ì ê¶Œí•œ ê´€ë¦¬ ë²„íŠ¼ ì´ë²¤íŠ¸ ìœ„ì„
	document.getElementById("mainContent").addEventListener("click", (e) => {
	  // ê¶Œí•œ ë“±ë¡
	  if (e.target && e.target.id === "addRoleBtn") {
	    document.getElementById("roleFormBox").style.display = "block";
	    document.getElementById("roleFormTitle").innerText = "ê¶Œí•œ ë“±ë¡";
	  }

	  // ê¶Œí•œ ìˆ˜ì •
	  if (e.target && e.target.id === "editRoleBtn") {
	    const checked = document.querySelectorAll("#roleTable tbody input[type='checkbox']:checked");
	    if (checked.length === 0) {
	      showAlert("ìˆ˜ì •í•  ê¶Œí•œì„ ì„ íƒí•˜ì„¸ìš”.");
	      return;
	    }
	    if (checked.length > 1) {
	      showAlert("âš ï¸ ê¶Œí•œ ìˆ˜ì •ì€ í•œ ë²ˆì— í•˜ë‚˜ë§Œ ê°€ëŠ¥í•©ë‹ˆë‹¤.");
	      return;
	    }

	    const row = checked[0].closest("tr");
	    const cells = row.querySelectorAll("td");

	    const form = document.getElementById("roleForm");
	    form.elements["name"].value = cells[1].innerText;
	    form.elements["level"].value = cells[2].innerText;
	    form.elements["desc"].value = cells[3].innerText;
	    form.dataset.editingRow = row.rowIndex - 1;

	    document.getElementById("roleFormTitle").innerText = "ê¶Œí•œ ìˆ˜ì •";
	    document.getElementById("roleFormBox").style.display = "block";
	  }

	  // ê¶Œí•œ ì‚­ì œ
	  if (e.target && e.target.id === "deleteRoleBtn") {
	    const checked = document.querySelectorAll("#roleTable tbody input[type='checkbox']:checked");
	    if (checked.length === 0) {
	      showAlert("ì‚­ì œí•  ê¶Œí•œì„ ì„ íƒí•˜ì„¸ìš”.");
	      return;
	    }
	    if (checked.length > 1) {
	      showAlert("âš ï¸ ê¶Œí•œ ì‚­ì œëŠ” í•œ ë²ˆì— í•˜ë‚˜ë§Œ ê°€ëŠ¥í•©ë‹ˆë‹¤.");
	      return;
	    }

	    showConfirm("ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?", () => {
	      checked[0].closest("tr").remove();
	    });
	  }
	});
	// ===== ì‹œìŠ¤í…œ ì •ì±… ì„¤ì • ê¸°ëŠ¥ =====
	document.getElementById("mainContent").addEventListener("click", (e) => {
	  // ê³„ì • ì¶”ê°€ ë²„íŠ¼
	  if (e.target && e.target.id === "addAccountBtn") {
	    const select = document.getElementById("accountSelect");
	    const selected = select.options[select.selectedIndex];
	    if (!selected.value) return;

	    // ì´ë¯¸ ì¶”ê°€ëœ ê³„ì •ì¸ì§€ í™•ì¸
	    if (document.querySelector(`#accountTokens span[data-id="${selected.value}"]`)) return;

	    // í† í° ìƒì„±
	    const token = document.createElement("span");
	    token.className = "badge bg-info text-dark p-2";
	    token.dataset.id = selected.value;
	    token.dataset.name = selected.dataset.name;
	    token.dataset.phone = selected.dataset.phone;
	    token.dataset.email = selected.dataset.email;
	    token.style.cursor = "pointer";
	    token.innerHTML = `${selected.value} <span class="ms-1 text-danger fw-bold" style="cursor:pointer;">x</span>`;
	    document.getElementById("accountTokens").appendChild(token);
	  }

	  // í† í° í´ë¦­ â†’ ìƒì„¸ ì •ë³´
	  if (e.target.closest("span.badge")) {
	    const token = e.target.closest("span.badge");
	    const detailBox = document.getElementById("accountDetailBox");
	    document.getElementById("detailInfo").innerText =
	      `ì´ë¦„ : ${token.dataset.name}\nì „í™”ë²ˆí˜¸ : ${token.dataset.phone}\nì´ë©”ì¼ : ${token.dataset.email}`;
	    detailBox.style.display = "block";

	    // ì‚­ì œ ë²„íŠ¼ (x) ëˆ„ë¥´ë©´ ê³„ì • ì œê±°
	    if (e.target.innerText === "x") {
	      token.remove();
	      detailBox.style.display = "none";
	    }
	  }

	  // ìƒì„¸ ì •ë³´ ë°•ìŠ¤ ë‹«ê¸°
	  if (e.target && e.target.id === "closeDetailBtn") {
	    document.getElementById("accountDetailBox").style.display = "none";
	  }
	});

});

  </script>
</body>
</html>