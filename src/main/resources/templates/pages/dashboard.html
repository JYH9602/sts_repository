<!-- templates/pages/dashboard.html -->
<div th:fragment="content">
  <h2>보안 이벤트 요약</h2>

  <!-- 롤링 로그 -->
  <div class="rolling-box">
    <div class="rolling-text">
      <span>[탐지] SQL Injection 차단됨</span>
      <span>[탐지] XSS 공격 탐지됨</span>
      <span>[탐지] Port Scan 발생</span>
      <span>[탐지] RDP Brute Force 차단</span>
    </div>
  </div>

  <!-- 차트 2개 -->
  <div style="display:grid; grid-template-columns:1fr 1fr; gap:10px; margin-top:15px;">
    <div class="box"><canvas id="chart1"></canvas></div>
    <div class="box"><canvas id="chart2"></canvas></div>
  </div>

  <!-- 차트 + 표 -->
  <div style="display:grid; grid-template-columns:repeat(3,1fr); gap:10px; margin-top:15px;">
    <div class="box">일일 탐지 순위 (정책기반)</div>
    <div class="box"><canvas id="chart3"></canvas></div>
    <div class="box">일일 누적 탐지 패킷수</div>
  </div>

  <!-- 상태 박스 -->
  <div style="display:grid; grid-template-columns:repeat(3,1fr); gap:10px; margin-top:15px;">
    <div class="box">서버상태<br>
      <span class="circle green"></span>
      <span class="circle yellow"></span>
      <span class="circle red"></span>
      <span class="circle gray"></span>
    </div>
    <div class="box">리소스 사용량<br>
      <div class="battery"><div class="battery-level"></div></div>
    </div>
    <div class="box">방화벽 상태<br><strong style="color:lime;">ON</strong></div>
  </div>

  <!-- 최근접속로그 -->
  <div class="box mt-3">
    최근접속로그
    <table>
      <tr><th>시간</th><th>IP</th></tr>
      <tr><td>12:00</td><td>192.168.0.10</td></tr>
      <tr><td>12:05</td><td>192.168.0.11</td></tr>
    </table>
  </div>

  <!-- 알림현황 -->
  <div class="box mt-3">
    일일 이메일 알림현황
    <ul>
      <li>관리자 알림 전송 완료</li>
      <li>정책 알림 대기</li>
      <li>서버상태 알림 완료</li>
    </ul>
  </div>

  <script th:inline="javascript">
    document.addEventListener("DOMContentLoaded", () => {
      new Chart(document.getElementById('chart1'), {
        type:'line',
        data:{ labels:["0시","4시","8시","12시","16시","20시"],
          datasets:[
            {label:"행동기반", data:[5,7,3,8,6,9], borderColor:"red", fill:false},
            {label:"패턴기반", data:[3,4,6,2,7,5], borderColor:"blue", fill:false}
          ]
        }
      });

      new Chart(document.getElementById('chart2'), {
        type:'bar',
        data:{ labels:["정책A","정책B","정책C"],
          datasets:[{label:"탐지 건수", data:[12,19,7], backgroundColor:["red","orange","green"]}]}
      });

      new Chart(document.getElementById('chart3'), {
        type:'pie',
        data:{ labels:["Critical","High","Medium","Low"],
          datasets:[{data:[5,10,15,20], backgroundColor:["red","orange","yellow","green"]}]}
      });
    });
  </script>
</div>
